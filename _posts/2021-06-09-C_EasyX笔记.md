---
layout: post   	
catalog: true 	
tags:
    - C语言
---



# C语言图形化

## EasyX官方手册

 https://docs.easyx.cn/zh-cn/style-settings

## 绘图窗口

### 加载头文件 

```c++
#include <graphics.h>
```

### 创建一个多大的窗口 

```c++
initgraph(int width,int height); //单位是像素
```

### 关闭 

```c++
closegraph();
```

### 窗口坐标

以左上角为原点，向右为X轴，向下为Y轴

### 颜色 

#### 颜色宏表示颜色 

* BLACK				黑
* BLUE				蓝
* GREEN				绿
* CYAN				青
* RED					红
* MAGENTA				紫
* BROWN				棕
* LIGHTGRAY			浅灰
* DARKGRAY			深灰
* LIGHTBLUE			亮蓝
* LIGHTGREEN			亮绿
* LIGHTCYAN			亮青
* LIGHTRED			亮红
* LIGHTMAGENTA		亮紫
* YELLOW				黄
* WHITE				白

#### RGB配置颜色 

```c++
setlinecolor(RGB(_,_,_));
```

#### 颜色设置

* 背景颜色

```c++
setbkcolor();

cleardevice();//刷新
```

* 文字颜色

```c++
settextcolor();
```

* 线颜色

```c++
setlinecolor(); //设置颜色要在画图操作前设置
```

* 填充颜色

```c++
setfillcolor();
```



## 基本绘图

### 画点 

```c++
putpixel(int x,int y,COLOR color);
```

### 画线

```c++
line(int x,int y,int xx,int yy); //这里x、y的含义是线的起始端点，xx、yy的含义是线的末端点
```

### 画矩形

#### 非填充

```c++
rectangle(int x,int y,int xx,int yy); //这里x、y含义是矩形左上角的起始端点，xx、yy是矩形右下角的端点	
```

#### 填充

* 有边界线

```c++
fillrectangle(int x,int y,int xx,int yy);
```

* 没边界线

```c++
solidrectangle(int x,int y,int xx,int yy);
```

### 画圆

#### 非填充

​		circle(int x,int y,int R);

#### 填充

​		a.有边界线
​			fillcircle(int x,int y,int R);
​		b.没边界线
​			solidcircle(int x,int y,int R);

### 文字输出

#### 只能输出字符串

```c++
outtextxy(int x,int y,char *str);//数组指针
```

#### 去掉文字背景

```c++
setbkmode(TRANSPARENT);
```

#### 文字格式

```c++
a.settextstyle(宽,高,char* fontName);//宽、高的值若为 0，则为自动适应字体大小
```

#### 数字输出

要自己封装一个函数,将整型转换为字符串型

```c++
		void outtextxy_int(int x,int y,char* format,int iNumber){
			char str[20] = "";
			sprintf(str,format,iNumber);//sprintf是字符串格式化命令
			outtextxy(x,y,str);
		}
		在调用该函数时，format后面要加%d
		如果有警告：则使用 #define _CRT_SECURE_NO_WARNINGS
```



## 基本贴图

### 声明一个存储图片的变量

```c++
IMAGE img; //类型 + 变量名
```

### 加载图片

```c++
loadimage(&img,char* imgUrl);//char* imgUrl为图片地址，直接写图片名称时要加""
```

### 显示图片

```c++
putimage(int x,int y,&img);//x、y表示图片的起始点
```

### 图片与窗口大小不一致

* 使窗口适应图片大小

* 使图片适应窗口大小

  * 缩放图片

  ```c++
  loadimage(&img,char* imgUrl,int width,int height);
  ```

### 图片坐标

#### 定点取图片

```c++
putimage(int x,int y,int xx,int yy,&img,int X,int Y);//X、Y表示定点取图的起始点，xx、yy表示定点取的图片的大小
```

#### 透明贴图

* 准备素材
  * 掩码图
  * 背景图
* 贴掩码图

```c++
SRCAND and putimage(int x,int y,&img,SRCAND);
```



* 贴背景图

```c++
SRCPAINT or putimage(int x,int y,&img,SRCPAINT);
```



## 鼠标操作

### 声明一个存储鼠标信息的变量

```c++
MOUSEMSG m;
```

### 获取鼠标

```c++
m = GetMouseMsg(); //要放在一个循环结构中，才能不断获取鼠标消息
```

### 分类讨论消息的类型

```c++
//鼠标消息 m.uMsg
			switch(m.uMsg){				//WM是Windows message 的简称，_后面的内容代表消息的类型
				case WM_MOUSEMOVE://鼠标移动
					break;
				case WM_LBUTTONDOWN;//点击左键
					break;
				case WM_RBUTTONDOWN；//点击右键
					break;
				}
```



## 音乐播放

### 引用 Winmm.lib 库文件

```c++
#pragma comment(lib,"Winmm.lib")
```



### 使用播放多媒体的函数

一般只用到第一个参数，其他三个参数分别设置为 NULL,0,NULL

#### 打开音乐

```c++
mciSendString("open MediaName",NULL,0,NULL);
```

#### 播放音乐

```c++
mciSendString("play MediaName",NULL,0,NULL);
```

#### 停止播放

```c++
mciSendString("stop MediaName",NULL,0,NULL);
```

#### 关闭音乐

```c++
mciSendString("close MediaName",NULL,0,NULL);
```

#### 一些有用的多媒体命令

* 从头播放 xxx

```c++
"play xxx from 0"
```

* 循环播放 .mp3 文件(.wma / .mid 同样可以)

```c++
"open xxx.mp3" 然后 "play xxx.mp3 repeat"
```

* 循环播放 .wav 文件

```c++
"open xxx.wav type MPEGVideo" 然后 "play xxx.wav repeat"
```

* 关闭当前程序打开的所有多媒体文件

```c++
"close all" 
```

注意：

如果文件名中有空格，需要用双引号引起来文件名（注意转义）：

如

```c++
mciSendString("open \"D:\\My Music\\俞丽拿 梁祝 化蝶.mp3\" alias mymusic", NULL, 0, NULL);
```

## 其他

* ```c++
  #include<conio.h> 是Console Input/Output（控制台输入输出）的简写
  ```

* ```c++
  Sleep(s) //设置画图频率,单位毫秒
  ```

* ```c++
  cleardevice();//刷新
  ```