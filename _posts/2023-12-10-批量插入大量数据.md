---
layout: post   	
catalog: true 	
tags:
    - 业务场景
---



**需要一次性将一批数据存入MySQL，怎么实现性能最佳**

使用mybatis + MySQL事务

```xml
<mapper namespace="com.example.DataMapper">
    <insert id="insertDataList" parameterType="java.util.List">
        INSERT INTO table_name (column1, column2)
        VALUES
        <foreach collection="list" item="item" separator=",">
            (#{item.value1}, #{item.value2})
        </foreach>
    </insert>
</mapper>
```

Mapper接口

```java
public interface DataMapper {
	@Transaction
    void insertDataList(List<Data> dataList);
}
```

Java代码

```java
public class Main {
    public static void main(String[] args) {
        String resource = "path/to/mybatis-config.xml";
        try (InputStream inputStream = Resources.getResourceAsStream(resource)) {
            SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
            try (SqlSession sqlSession = sqlSessionFactory.openSession()) {
                DataMapper dataMapper = sqlSession.getMapper(DataMapper.class);

                List<Data> dataList = getDataList();

                dataMapper.insertDataList(dataList);
                sqlSession.commit();

                System.out.println("插入记录数：" + dataList.size());
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```
