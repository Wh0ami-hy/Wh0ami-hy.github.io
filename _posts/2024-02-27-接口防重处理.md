---
layout: post   	
catalog: true 	
tags:
    - 业务场景
---
# 1. 使用场景

在Web应用程序中，用户可能会重复提交表单，例如在点击提交按钮后多次点击或者网络延迟造成用户误以为提交未成功而再次提交。这可能导致一些问题，例如重复的数据插入或重复的业务逻辑处理。

接口防重处理的主要作用是在用户提交表单请求时，对请求进行拦截和处理，防止重复提交。从url里面取：【参数，url，用户】然后和过期时间一起放到redis

下次再来的时候会去redis里面去查询，如果已经过期没有，那么通过，然后再重新放入redis，如果还有，那么就不通过。


# 2. 方案

在缓存中（若依的缓存就是使用redis）记录每个客户端的请求方法和参数，在redis中设置超时时间。如果在超时时间内进行了第二次请求且参数都一致，拦截器进行拦截抛出异常不进行真正的处理。思路其实和限流类似，只是这里多了对请求参数的处理，并且没有采用AOP而是用了拦截器去实现



或

生成了唯一的key，仔细看key的组成为url+token+参数,意味着每一个用户的每一个请求都在redis当中存了个key，值的化存了个空字符串（因为我们只需要key来保证唯一性，值不存东西也行）。  
首先，我们获取这个key的值，如果是空说明用户第一次请求，然后将key存进去。如果不为空，说明在限制时间里（key没过期）用户再次进行了提交，返回错误信息。
